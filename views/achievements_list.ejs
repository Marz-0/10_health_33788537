<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Achievements - <%= shopData.shopName %></title>
    <link rel="stylesheet" href="/main.css" />
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <h2><%= shopData.shopName %></h2>
        <nav>
          <a href="/">Home</a>
          <a href="/workouts/list">All workouts</a>
          <a href="/workouts/addworkout">Add workout</a>
          <a href="/workouts/search">Search workouts</a>
          <a href="/workouts/shortworkouts">Short workouts</a>
          <a href="/achievements/list" class="active">Achievements</a>
          <a href="/achievements/add">Add achievement</a>
          <a href="/achievements/report">Achievement report</a>
          <a href="/weather">Weather</a>
          <a href="/about">About</a>
          <% if (currentUser) { %>
            <a href="/users/list">Users</a>
            <a href="/users/audit">Login audit</a>
          <% } %>
        </nav>
      </aside>

      <div class="main">
        <header class="topbar">
          <div class="topbar-title">Achievements</div>
          <div class="topbar-auth">
            <% if (currentUser) { %>
              <span>Hi, <%= currentUser %></span>
              <a href="/users/logout">Logout</a>
            <% } else { %>
              <a href="/users/login">Login</a>
              <a href="/users/register">Register</a>
            <% } %>
          </div>
        </header>

        <main class="main-content">
          <h1>Fitness achievements</h1>
          <p>Track milestones like personal bests, streaks, and strength goals.</p>

          <ul class="workout-list">
            <% if (Array.isArray(achievements) && achievements.length) { %>
              <% achievements.forEach(function (item) { %>
                <li>
                  <strong><%= item.title %></strong>
                  <% if (item.category) { %> â€” <%= item.category %><% } %>
                  <% if (item.metric_value !== null && item.metric_value !== undefined) { %>
                    , <%= item.metric_value %><% if (item.metric_unit) { %> <%= item.metric_unit %><% } %>
                  <% } %>
                  <% if (item.achieved_at) { %> (on <%= item.achieved_at %>) <% } %>
                  <% if (item.description) { %>
                    <div style="margin-top:4px; color:#6b7280; font-size:0.95rem;">
                      <%= item.description %>
                    </div>
                  <% } %>
                </li>
              <% }) %>
            <% } else { %>
              <li>No achievements recorded yet. <a href="/achievements/add">Add your first one</a>.</li>
            <% } %>
          </ul>

          <p style="margin-top:0.9rem;">
            <a href="/achievements/add">Add achievement</a> |
            <a href="/achievements/report">View report</a>
          </p>
        </main>
      </div>
    </div>
  </body>
</html>
